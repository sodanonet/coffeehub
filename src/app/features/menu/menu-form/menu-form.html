<div class="p-8 max-w-4xl mx-auto">
  <header class="mb-8">
    <h1 class="text-3xl font-bold text-gray-900">
      {{ isEditMode() ? 'Edit Menu Item' : 'Add New Menu Item' }}
    </h1>
  </header>

  <app-card>
    <form [formGroup]="menuForm" (ngSubmit)="onSubmit()">
      <div class="grid grid-cols-2 gap-6 mb-8">
        <div class="flex flex-col">
          <label for="name" class="font-medium text-gray-700 mb-2 text-sm">Item Name *</label>
          <input
            id="name"
            type="text"
            formControlName="name"
            class="px-3 py-2 border border-gray-300 rounded-md text-base"
          />
        </div>

        <div class="flex flex-col">
          <label for="category" class="font-medium text-gray-700 mb-2 text-sm">Category *</label>
          <select id="category" formControlName="category" class="px-3 py-2 border border-gray-300 rounded-md text-base">
            <option value="">Select Category</option>
            @for (cat of categories; track cat) {
              <option [value]="cat">
                {{ cat }}
              </option>
            }
          </select>
        </div>

        <div class="flex flex-col col-span-2">
          <label for="description" class="font-medium text-gray-700 mb-2 text-sm">Description *</label>
          <textarea
            id="description"
            formControlName="description"
            class="px-3 py-2 border border-gray-300 rounded-md text-base"
            rows="3"
          ></textarea>
        </div>

        <div class="flex flex-col">
          <label for="price" class="font-medium text-gray-700 mb-2 text-sm">Base Price *</label>
          <input
            id="price"
            type="number"
            step="0.01"
            formControlName="price"
            class="px-3 py-2 border border-gray-300 rounded-md text-base"
          />
        </div>

        <div class="flex flex-col">
          <label for="calories" class="font-medium text-gray-700 mb-2 text-sm">Calories *</label>
          <input
            id="calories"
            type="number"
            formControlName="calories"
            class="px-3 py-2 border border-gray-300 rounded-md text-base"
          />
        </div>

        <div class="flex flex-col">
          <label for="prepTime" class="font-medium text-gray-700 mb-2 text-sm">Prep Time (min) *</label>
          <input
            id="prepTime"
            type="number"
            formControlName="prepTime"
            class="px-3 py-2 border border-gray-300 rounded-md text-base"
          />
        </div>

        <div class="flex flex-col col-span-2">
          <label for="sizes-array" class="font-medium text-gray-700 mb-2 text-sm">Sizes</label>
          <div id="sizes-array" formArrayName="sizes" class="flex flex-col gap-4 mb-4">
            @for (size of sizes.controls; track $index; let i = $index) {
              <div [formGroupName]="i" class="grid grid-cols-[1fr_1fr_1fr_auto] gap-2">
                <input
                  type="text"
                  formControlName="name"
                  placeholder="Size name"
                  class="px-3 py-2 border border-gray-300 rounded-md text-base"
                />
                <input
                  type="number"
                  formControlName="ounces"
                  placeholder="Ounces"
                  class="px-3 py-2 border border-gray-300 rounded-md text-base"
                />
                <input
                  type="number"
                  step="0.01"
                  formControlName="price"
                  placeholder="Price"
                  class="px-3 py-2 border border-gray-300 rounded-md text-base"
                />
                <app-button type="button" variant="danger" (clicked)="removeSize(i)">Remove</app-button>
              </div>
            }
          </div>
          <app-button type="button" variant="outline" (clicked)="addSize()">+ Add Size</app-button>
        </div>

        <div class="flex flex-col col-span-2">
          <label for="ingredients" class="font-medium text-gray-700 mb-2 text-sm">Ingredients (comma-separated) *</label>
          <input
            id="ingredients"
            type="text"
            formControlName="ingredientsText"
            class="px-3 py-2 border border-gray-300 rounded-md text-base"
            placeholder="Coffee, Milk, Sugar"
          />
        </div>
      </div>

      <div class="flex justify-end gap-4 pt-4 border-t border-gray-200">
        <app-button type="button" variant="outline" (clicked)="onCancel()">Cancel</app-button>
        <app-button type="submit" [disabled]="menuForm.invalid || submitting()">
          {{ submitting() ? 'Saving...' : isEditMode() ? 'Update Item' : 'Create Item' }}
        </app-button>
      </div>
    </form>
  </app-card>
</div>
